# 8장. 메서드

[https://www.notion.so/8-23323d237df74d94b47c3349dd38c3d9](https://www.notion.so/8-23323d237df74d94b47c3349dd38c3d9)

> 요약 : 메서드 뿐 아니라, 생성자에서 매개변수와 반환 값을 어떻게 처리해야하는지 메서드 시그니처는 어떻게 설계해야하는 지, 문서화는 어떻게 해야하는 지를 다룬다.
키워드 : 사용성 견고성 유연성

# 아이템 49. 매개변수가 유효한지 검사하라.

메서드와 생성자 대부분은 입력 매개변수의 값이 특정 조건을 만족하기를 바란다.

ex) 인덱스 값은 음수이면 안되며, 객체 참조는 null이 아니어야 하는 식.

⇒ 메서드 몸체가 실행되기 전에 매개변수를 확인하는 습관을 들여야 한다.

⇒ public, protected 메서드는 매개변수 값이 잘못됐을 때 던지는 예외를 문서화해두도록 한다.

(@throws 태그 사용, ex) IllegalArgumentException, IndexOutOfBoundsException,NullPointerException)

@Nullable이나 비슷한 메서드를 사용해, null이 될 수도 있다고 알려줄 수 있지만 표준적인 방법은 아니다.

자바 7 에 추가 : java.util.objects.requireNomNull 메서드 

자바 9 에 추가 : Objects에 범위 검사 기능 : checkFromIndexSize, checkFromToIndex, checkIndex 메서드

public이 아닌 메서드에서는 단언문 assert를 사용해 매개변수 유효성을 검증할 수 있다. 

: 실패하면 AssertionError

# 아이템 50. 적시에 방어적 복사본을 만들라

늘. 클라이언트가 불변식을 깨트리려 혈안이 되어 있다고 가정하고 방어적으로 프로그래밍 해야 한다.

Date는 가변이기때문에 생성자에 사용하는 걸 주의해야 한다.

대신 Instant나, LocalDateTine, ZonedDateTime을 사용해도 된다. (불변)

매개변수의 유효성을 검사하기전에 방어적 복사본을 만들고, 이 복사본으로 유효성을 검사하자.

멀티스레딩 환경이라면 원본 객체의 유효성을 검사한 후 복사본을 만드는 그 찰나의 취약한 순간에 다른 스레드가 원본 객체를 수정할 위험이 있기때문이다.

*방어적 복사본을 만들 때 clone을 사용하지 않게 주의하자.(생성자와 달리 접근자 메서드에서는 방어적 복사에 clone을 사용해도 된다.)

# 아이템 51. 메서드 시그니처를 신중하게 설계하라

- 메서드 이름을 신중히 짓자
- 편의 메서드를 너무 많이 만들지 말자
- 매개변수 목록은 짧게 유지하자.
    1. 여러메서드로 쪼갠다.
    2. 매개변수 여러 개를 묶어주는 도우미 클래스를 만드는 것이다. 
    3. 세번째는 앞서의 두 기법을 혼합한 것으로, 객체 생성에 사용한 빌더 패턴을 메서드 호출에 응용한다고 보면 된다.